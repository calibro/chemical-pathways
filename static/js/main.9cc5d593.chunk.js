(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){e.exports=a(280)},13:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(57),c=a.n(n),r=a(97),o=a.n(r)()(c.a);t.b=c()({projectId:"i89zv88h",dataset:"projects",useCdn:!0})},19:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e){return e.map(function(e,t){return 0===t?"?selected=".concat(e.value):"&selected=".concat(e.value)}).join("")}},27:function(e,t,a){"use strict";var n=a(281),c=a(0),r=a.n(c);t.a=function(e){var t=e.fullheader,a=void 0===t||t;return r.a.createElement("div",{className:"d-flex justify-content-center align-items-center bg-white",style:{position:"absolute",top:a?"80px":"40px",bottom:0,left:0,right:0,zIndex:999}},r.a.createElement(n.a,{type:"grow",color:"dark"}))}},275:function(e,t,a){},280:function(e,t,a){"use strict";a.r(t);var n=a(15),c=a(16),r=a(24),o=a(20),l=a(23),i=a(0),s=a.n(i),m=a(12),u=a.n(m),d=a(294),h=a(295),p=a(292),f=a(296),v=Object(f.a)(function(e){var t=e.history;return s.a.createElement("div",{className:"landing-container"},s.a.createElement("div",{className:"landing-upper-container"},s.a.createElement("div",{className:"landing-upper-content"},s.a.createElement("div",{className:"landing-logo-container"},s.a.createElement("img",{src:"images/logo-white.svg",width:"350px"})),s.a.createElement("div",{className:"landing-text-container"},s.a.createElement("div",{className:"w-100 landing-text-container-upper"},"The everyday lives of contemporary youth are awash with chemicals to boost pleasure, moods, sexual performance, appearance and health. What do pills, drinks, sprays, powders and lotions do for youth? What effects are they seeking? How can we understand the ways chemicals affect young bodies and minds? ",s.a.createElement("br",null),s.a.createElement("br",null),"Instead of focusing on illegal drug use with the purpose of controlling it, we study the pervasive use of chemicals in everyday life \u2013 ethnographically, from the perspective of youth themselves."),s.a.createElement("div",{className:"landing-text-container-lower",style:{marginRight:"2%"}},"We draw on medical anthropology and studies of science, technology and contemporary youth culture to research the lived effects of chemicals. By \u2018lived effects\u2019, we mean the combination of chemicals\u2019 pharmaceutical properties, beliefs and expectations surrounding their use, and users\u2019 experimentation with various techniques. Our ethnographic fieldwork, based on participant observation and long-term immersion in the field, takes place in the Netherlands, France, Indonesia and the Philippines."),s.a.createElement("div",{className:"landing-text-container-lower",style:{marginLeft:"2%"}},"This website is dynamic, experimental and rich, like the methods used and insights produced during our innovative, tentacular project.",s.a.createElement("br",null),s.a.createElement("br",null),"The first phase of ChemicalYouth has ended, but our work continues and this website will keep growing. We have many publications in the oven, and numerous small and big projects are still in the works. It is likely that you will find something new every time you visit us.")),s.a.createElement("div",{className:"landing-link link",onClick:function(){t.push("/chemical")}},"EXPLORE THE PROJECT",s.a.createElement("span",null,s.a.createElement("img",{src:"images/arrow-right.svg",width:"20px"}))))),s.a.createElement("div",{className:"landing-lower"},s.a.createElement("div",{className:"landing-lower-container"},s.a.createElement("div",{className:"landing-lower-text"},"The ChemicalYouth project is based at the University of Amsterdam and received 5 years of funding from the European Research Council (2013-2018)."),s.a.createElement("div",null,s.a.createElement("img",{src:"images/aissr_logoblokjesite_GRAY.png",height:"80px"})),s.a.createElement("div",null,s.a.createElement("img",{src:"images/uvalogo_tag_p.png",height:"80px"})),s.a.createElement("div",null,s.a.createElement("img",{src:"images/LOGO_ERC.png",height:"80px"})),s.a.createElement("div",{className:"landing-lower-text"},"This website is designed and developed by Calibro. Project team: Lorem ipsum, dolor sit amet, other sui, lorem dolor, ather examples."),s.a.createElement("div",null,s.a.createElement("img",{src:"images/LOGO_ERC.png",height:"80px"})))))}),g=a(95),E=a.n(g),b=a(4),y=a(8),j=a(282),x=a(283),O=a(284),w=a(285),N=a(286),k=a(287),C=a(38),S=Object(C.withGetScreen)(Object(f.a)(function(e){var t=e.history,a=e.expanded,n=void 0===a||a,c=e.isMobile,r=Object(i.useContext)(y.a),o=Object(i.useState)(!1),l=Object(b.a)(o,2),m=l[0],u=l[1];Object(i.useEffect)(function(){var e=t.location.pathname.split("/");r.setSection(e[1])},[t.location.pathname]);var d=function(e){r.setSection(e),r.selected=[],t.push("/".concat(e))};return s.a.createElement("div",null,s.a.createElement(j.a,{color:"light",light:!0,expand:"md",className:"header",style:{height:c()?"auto":n?"70px":"12px"}},n&&s.a.createElement(s.a.Fragment,null,s.a.createElement(x.a,null,s.a.createElement("div",{className:"navbar-brand cursor-pointer",onClick:function(){t.push("/")}},s.a.createElement("img",{src:"images/logo-white.svg",width:60}))),s.a.createElement(O.a,{onClick:function(){return u(!m)}}),s.a.createElement(w.a,{isOpen:m,navbar:!0},s.a.createElement(N.a,{className:"",navbar:!0},s.a.createElement(k.a,{className:"nav-item"},s.a.createElement("div",{className:"header-el-not-link"},"View by:")),s.a.createElement(k.a,{className:"nav-item",onClick:function(){return d("chemical")}},s.a.createElement("div",{className:"header-el ".concat("chemical"===r.section?"underline":"none")},"CHEMICAL")),s.a.createElement(k.a,{className:"nav-item",onClick:function(){return d("topic")}},s.a.createElement("div",{className:"header-el ".concat("topic"===r.section?"underline":"none")},"TOPIC")),s.a.createElement(k.a,{className:"nav-item",onClick:function(){return d("location")}},s.a.createElement("div",{className:"header-el ".concat("location"===r.section?"underline":"none")},"LOCATION")),s.a.createElement(k.a,{className:"nav-item",onClick:function(){return d("researcher")}},s.a.createElement("div",{className:"header-el ".concat("researcher"===r.section?"underline":"none")},"RESEARCHER")),s.a.createElement(k.a,{className:"nav-item",onClick:function(){return d("time")}},s.a.createElement("div",{className:"header-el ".concat("time"===r.section?"underline":"none")},"TIME")),s.a.createElement(k.a,{className:"nav-item",onClick:function(){return d("method")}},s.a.createElement("div",{className:"header-el ".concat("method"===r.section?"underline":"none")},"METHOD")))))))})),P=a(13),I=a(25),T=a(17),M=a(22),R=a(34),L=a.n(R),_=a(98),W=a.n(_),z=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).matchStateToTerm=function(e,t){if(t.length>0)return a.props.objectKey?(console.log(-1!==e[a.props.objectKey].toLowerCase().indexOf(t.toLowerCase())),-1!==e[a.props.objectKey].toLowerCase().indexOf(t.toLowerCase())):-1!==e.name.toLowerCase().indexOf(t.toLowerCase())},a.state={value:""},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.items,n=t.type,c=t.selectionCallBack,r=t.objectKey,o=this.state.value;return s.a.createElement("div",{className:"autocomplete-container"},s.a.createElement("img",{src:"images/magnify.svg",width:20,className:"autocomplete-icon"}),s.a.createElement(W.a,{getItemValue:function(e){return r?e[r]:e.name},items:a,inputProps:{className:"autocomplete-input",placeholder:"Search ".concat(n)},wrapperStyle:{position:"relative"},menuStyle:{backgroundColor:"white",position:"absolute",zIndex:999,top:33,left:0,maxHeight:"500px",overflow:"auto"},open:!0,renderItem:function(t,a){return s.a.createElement("div",{key:t._id,style:{padding:"10px",borderBottom:"1px solid #d7d7d7",cursor:"pointer",opacity:e.context.selected.some(function(e){return e.value===t.name})?.5:1},className:"hover-el"},r?t[r]:t.name)},value:o,shouldItemRender:this.matchStateToTerm,onChange:function(t,a){return e.setState({value:a})},onSelect:function(t){c(n,t),e.setState({value:""})},isItemSelectable:function(t){return console.log(e.context.selected.some(function(e){return e.value===t.name})),!e.context.selected.some(function(e){return e.value===t.name})}}))}}]),t}(i.Component);z.contextType=y.a;var D=z,U=a(19),A=a(21),F=a.n(A),V=window.innerWidth/2-60,H=window.innerHeight-140,B=Object(T.a)().range([0,50]),G=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).setUpForceLayout=function(e){var t=Object(M.a)(e,function(e){return e.relatedProjects}),n=Object(b.a)(t,2),c=(n[0],n[1]);B.domain([0,c]);var r=e.filter(function(e){return e.relatedProjects>0}).sort(function(e,t){return t.relatedProjects-e.relatedProjects}).map(function(e){return e.radius=B(e.relatedProjects),e});r.map(function(e,t){if(t<r.length-1)return{source:t,target:t+1}}).slice(0,r.length-1),Object(I.f)(r).force("charge",Object(I.d)().strength(5)).force("center",Object(I.a)(V/2,H/2)).force("collision",Object(I.b)().radius(function(e){return e.radius+10}).strength(1).iterations(2)).on("tick",function(e){r.forEach(function(e){e.x=e.x<B(e.relatedProjects)?B(e.relatedProjects):e.x>V-B(e.relatedProjects)?V-B(e.relatedProjects):e.x,e.y=e.y<B(e.relatedProjects)?B(e.relatedProjects):e.y>H-B(e.relatedProjects)?H-B(e.relatedProjects):e.y}),a.setState({nodes:r})}).on("end",function(e){})},a.selectChemical=function(e,t){a.context.toggleSelected({type:e,value:t});var n=Object(U.a)(a.context.selected);a.props.history.push("/".concat(a.context.section).concat(n))},a.state={chemicals:[],nodes:[],activeState:null},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;0===this.state.chemicals.length&&P.b.fetch('*[_type=="chemical"]{\n  name,\n  "relatedProjects": count(*[_type==\'project\' && references(^._id)])\n}').then(function(t){e.setState({chemicals:t}),e.setUpForceLayout(t)}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.nodes,n=t.chemicals,c=t.activeIndex,r=(this.props.isMobile,this.context.selected?this.context.selected.map(function(e){return e.value}):[]);return s.a.createElement("div",{className:"viz-container"},s.a.createElement(L.a,{place:"top",theme:"dark",effect:"solid",className:"tooltip-extra-class"}),s.a.createElement(D,{items:n,selectionCallBack:this.selectChemical,type:"chemical"}),s.a.createElement(F.a,{minWidth:600},s.a.createElement("div",{className:"w-100 d-flex flex-column",style:{height:"calc(100% - 33px)"}},s.a.createElement("svg",{width:V,height:H},a.map(function(t,a){B(t.relatedProjects);if(t.relatedProjects>0)return s.a.createElement("g",{key:a},s.a.createElement("circle",{"data-tip":B(t.relatedProjects)<=10?t.name.toUpperCase():"",ref:t.name,cx:t.x,cy:t.y,className:"circle ".concat(r.indexOf(t.name)>-1||c===a?"active":""),stroke:"black",strokeWidth:1,r:B(t.relatedProjects),onClick:function(){return e.selectChemical("chemical",t.name)},onMouseEnter:function(){e.setState({activeIndex:a}),L.a.show(Object(m.findDOMNode)(e.refs[t.name]))},onMouseLeave:function(){e.setState({activeIndex:null}),L.a.hide(Object(m.findDOMNode)(e.refs[t.name]))},style:{cursor:"pointer"}}),B(t.relatedProjects)>10&&s.a.createElement("g",null,s.a.createElement("rect",{x:t.x-5.2*t.name.length/2,y:t.y-5,width:5.2*t.name.length,height:10,className:"rect ".concat(r.indexOf(t.name)>-1||c===a?"active":"")}),s.a.createElement("text",{dx:t.x,dy:t.y,className:"text ".concat(r.indexOf(t.name)>-1||c===a?"active":""),textAnchor:"middle"},t.name)))})))))}}]),t}(i.Component),Z=Object(f.a)(G);Z.WrappedComponent.contextType=y.a;var K=Z,Q=a(27),Y=Object(f.a)(function(e){var t=e.type,a=e.history,n=Object(i.useState)([]),c=Object(b.a)(n,2),r=c[0],o=c[1],l=Object(i.useState)(!0),m=Object(b.a)(l,2),u=m[0],d=m[1],h=Object(i.useState)(null),p=Object(b.a)(h,2),f=p[0],v=p[1],g=Object(i.useContext)(y.a);Object(i.useEffect)(function(){0===r.length&&P.b.fetch('*[_type=="topic"]{\n  _id, name,\n  "relatedProjects": count(*[_type==\'project\' && references(^._id)])\n}').then(function(e){return function(e){o(e),d(!1)}(e),function(){}}).catch(function(e){console.error(e)})},[t]);var E=function(e,t){g.toggleSelected({type:e,value:t});var n=Object(U.a)(g.selected);a.push("/".concat(g.section).concat(n))},j=g.selected?g.selected.map(function(e){return e.value}):[],x=Object(M.a)(r,function(e){return e.relatedProjects}),O=Object(b.a)(x,2),w=(O[0],O[1]),N=Object(T.a)().range([10,36]).domain([0,w]);return s.a.createElement("div",{className:"viz-container"},u&&s.a.createElement(Q.a,null),s.a.createElement(D,{items:r,selectionCallBack:E,type:"topic"}),s.a.createElement(F.a,{minWidth:600},s.a.createElement("div",{className:"w-100 d-flex flex-wrap align-items-baseline mt-3 overflow-auto",style:{height:"calc(100% - 33px)"}},r.sort(function(e,t){return t.relatedProjects-e.relatedProjects}).map(function(e,t){return s.a.createElement("div",{className:"position-relative mr-3",key:t,style:{height:"45px"},onClick:function(){return E("topic",e.name)},onMouseEnter:function(){return v(t)},onMouseLeave:function(){return v(null)}},s.a.createElement("div",{className:"cursor-pointer",style:{fontSize:N?N(e.relatedProjects):"10px",bottom:"3px"}},e.name," ",s.a.createElement("sup",null,e.relatedProjects)),s.a.createElement("div",{className:"topic-block-line ".concat(j.indexOf(e.name)>-1||f===t?"active":"")}))}))))}),J=a(30),q=window.innerWidth/2-60,X=window.innerHeight-140,$=Object(T.a)().range([0,60]),ee=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).setUpForceLayout=function(e,t){var n=Object(M.a)(e,function(e){return e.value}),c=Object(b.a)(n,2),r=(c[0],c[1]);$.domain([0,r]);var o=e.filter(function(e){return e.value>0}).map(function(e){return e.radius=$(e.value),e}),l=Object.values(Object(J.groupBy)(t)),i=[];l.map(function(t,a){var n=e.findIndex(function(e){return e.name===t[0][0]}),c=e.findIndex(function(e){return e.name===t[0][1]}),r=t.length;i.push({source:n,target:c,weight:r})}),a.setState({links:i});Object(I.f)(o).force("charge",Object(I.d)().strength(0)).force("link",Object(I.c)(i).strength(function(e){return.1*e.weight})).force("r",Object(I.e)(150)).force("center",Object(I.a)(q/2,X/2)).force("collision",Object(I.b)().radius(function(e){return e.radius+17}).strength(1).iterations(30)).on("tick",function(e){o.forEach(function(e){e.x=e.x<$(e.value)?$(e.value)+5:e.x>q-$(e.value)?q-$(e.value)-5:e.x,e.y=e.y<$(e.value)?$(e.value)+5:e.y>X-$(e.value)?X-$(e.value)-5:e.y}),a.setState({nodes:o})})},a.selectResearcher=function(e,t){a.context.toggleSelected({type:e,value:t});var n=Object(U.a)(a.context.selected);a.props.history.push("/".concat(a.context.section).concat(n))},a.state={researchers:[],nodes:[],links:[],activeIndex:null},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;0===this.state.researchers.length&&P.b.fetch('*[_type == "project"]{\n  "researchers": researchers[]->\n}').then(function(t){var a=Object(J.flatten)(t.map(function(e){return e.researchers.map(function(e){return e.name})})).reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{}),n=Object.entries(a).map(function(e){return{name:e[0],value:e[1]}}),c=t.map(function(e){return e.researchers.map(function(e){return e.name})}),r=[];c.map(function(e,t){for(var a=e.length,n=0;n<a;n++){var c=e[0],o=e;if(o.splice(0,1),o.length>0)for(var l=0;l<o.length;l++){var i=[c,o[l]].sort();r.push(i)}}}),console.log(r),e.setState({researchers:n}),e.setUpForceLayout(n,r)}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.nodes,n=t.links,c=t.researchers,r=t.activeIndex,o=this.context.selected?this.context.selected.map(function(e){return e.value}):[];return s.a.createElement("div",{className:"viz-container"},s.a.createElement(L.a,{place:"top",theme:"dark",effect:"solid",className:"tooltip-extra-class"}),s.a.createElement(D,{items:c,selectionCallBack:this.selectResearcher,type:"researcher"}),s.a.createElement(F.a,{minWidth:600},s.a.createElement("div",{className:"w-100 d-flex flex-column mt-4",style:{height:"calc(100% - 33px)"}},s.a.createElement("svg",{width:q,height:X},n.map(function(e,t){return s.a.createElement("g",{key:t},s.a.createElement("line",{x1:e.source.x,y1:e.source.y,x2:e.target.x,y2:e.target.y,style:{strokeWidth:e.weight},stroke:"black"}))}),a.map(function(t,a){$(t.value);if(t.value>0)return s.a.createElement("g",{key:a},s.a.createElement("circle",{"data-tip":$(t.value)<=10?t.name.toUpperCase():"",ref:t.name,cx:t.x,cy:t.y,className:"circle ".concat(o.indexOf(t.name)>-1||r===a?"active":""),stroke:"black",strokeWidth:1,r:$(t.value),onClick:function(){return e.selectResearcher("researcher",t.name)},onMouseEnter:function(){e.setState({activeIndex:a}),L.a.show(Object(m.findDOMNode)(e.refs[t.name]))},onMouseLeave:function(){e.setState({activeIndex:null}),L.a.hide(Object(m.findDOMNode)(e.refs[t.name]))}}),$(t.value)>10&&s.a.createElement("g",null,s.a.createElement("rect",{x:t.x-5.2*t.name.length/2,y:t.y-4,width:5.2*t.name.length,height:10,className:"rect ".concat(o.indexOf(t.name)>-1||r===a?"active":"")}),s.a.createElement("text",{dx:t.x,dy:t.y,className:"text ".concat(o.indexOf(t.name)>-1||r===a?"active":""),textAnchor:"middle"},t.name)))})))))}}]),t}(i.Component),te=Object(f.a)(ee);te.WrappedComponent.contextType=y.a;var ae=te,ne=a(58),ce=function(e){var t=e.coordinates,a=e.zoom,n=e.country,c=e.city,r=e.callbackClick,o=e.selected,l=e.setActiveIndex,i=e.activeIndex,m=e.index;return s.a.createElement("div",{className:"location-block overflow-hidden ".concat(o.indexOf(c)>-1||i===m?"active":""),onClick:function(){return r("location",c)},onMouseEnter:function(){return l(m)},onMouseLeave:function(){return l(null)}},s.a.createElement("div",{className:"location-map",style:{height:"100%",width:"100%",position:"absolute",backgroundImage:"url(https://api.mapbox.com/styles/v1/gabrielecolombo/cjsnc1pt701yf1fmoasvam9wv/static/".concat(t.lng,",").concat(t.lat,",").concat(a,",0,0/600x600?access_token=pk.eyJ1IjoiZ2FicmllbGVjb2xvbWJvIiwiYSI6ImNpdGZqNWY1MjAwZWUyeW1qbDhkZHV2OXMifQ.Nem-UVIW-71T6yQQvjrtog)")}}),s.a.createElement("div",{className:"location-text"},s.a.createElement("div",{className:"location-country ".concat(o.indexOf(c)>-1||i===m?"underline-location":"")},n),s.a.createElement("div",{className:"location-city"},c)))},re={},oe=Object(ne.ScrollToHOC)(Object(f.a)(function(e){var t=e.type,a=e.history,n=e.scrollTo,c=Object(i.useState)([]),r=Object(b.a)(c,2),o=r[0],l=r[1],m=Object(i.useState)(!0),u=Object(b.a)(m,2),d=u[0],h=u[1],p=Object(i.useState)(null),f=Object(b.a)(p,2),v=f[0],g=f[1],E=Object(i.useContext)(y.a);Object(i.useEffect)(function(){0===o.length&&P.b.fetch('*[_type == "location"]{\n  _id, city, coordinates, zoom,\n  country->,\n  "relatedProjects": count(*[_type==\'project\' && references(^._id)])\n}').then(function(e){return j(e),function(){}}).catch(function(e){console.error(e)})},[t]);var j=function(e){l(e),e.filter(function(e){return e.coordinates.lat}).forEach(function(e,t){re[e.city.toLowerCase()]=O(t)}),console.log(re),h(!1)},x=function(e,t){E.toggleSelected({type:e,value:t});var c=Object(U.a)(E.selected);a.push("/".concat(E.section).concat(c)),console.log(re[t]),n({id:"locations",y:re[t]})},O=function(e){var t=window.innerWidth/100*16;return Math.floor(e/3)*t};return s.a.createElement("div",{className:"viz-container"},d&&s.a.createElement(Q.a,null),s.a.createElement(D,{items:o,selectionCallBack:x,type:"location",objectKey:"city"}),s.a.createElement(F.a,{minWidth:600},s.a.createElement(ne.ScrollArea,{id:"locations",className:"overflow-auto",style:{height:"calc(100% - 33px)"}},s.a.createElement("div",{className:"w-100 d-flex flex-wrap mt-4"},o.map(function(e,t){if(e.coordinates.lat)return s.a.createElement(ce,{key:t,index:t,activeIndex:v,coordinates:e.coordinates,y:function(){return O(t)},zoom:e.zoom,country:e.country.name,city:e.city,callbackClick:x,selected:E.selected?E.selected.map(function(e){return e.value}):[],setActiveIndex:g})})))))})),le=Object(f.a)(function(e){var t=e.type,a=e.history,n=Object(i.useState)([]),c=Object(b.a)(n,2),r=c[0],o=c[1],l=Object(i.useContext)(y.a);Object(i.useEffect)(function(){0===r.length&&P.b.fetch('*[_type == "methodology"]{\n  _id, name,\n  "relatedProjects": count(*[_type==\'project\' && references(^._id)])\n}').then(function(e){return m(e),function(){}}).catch(function(e){console.error(e)})},[t]);var m=function(e){o(e)},u=function(e,t){l.toggleSelected({type:e,value:t});var n=Object(U.a)(l.selected);a.push("/".concat(l.section).concat(n))},d=Object(M.a)(r,function(e){return e.relatedProjects}),h=Object(b.a)(d,2),p=(h[0],h[1]),f=Object(T.a)().range([30,150]).domain([0,p]);return s.a.createElement("div",{className:"viz-container"},s.a.createElement(D,{items:r,selectionCallBack:u,type:"method"}),s.a.createElement(F.a,{minWidth:600},s.a.createElement("div",{className:"w-100 overflow-auto",style:{height:"calc(100% - 33px)"}},r.sort(function(e,t){return t.relatedProjects-e.relatedProjects}).map(function(e,t){var a=l.selected.map(function(e){return e.value});return s.a.createElement("div",{className:"px-3 method-block ".concat(a.indexOf(e.name)>-1?"active":""),key:t,style:{height:"".concat(f(e.relatedProjects),"px")},onClick:function(){return u("method",e.name)}},e.relatedProjects," ",e.name)}))))}),ie=a(55),se=Object(f.a)(function(e){var t=e.type,a=e.history,n=Object(i.useState)([]),c=Object(b.a)(n,2),r=c[0],o=c[1],l=Object(i.useState)([]),m=Object(b.a)(l,2),u=(m[0],m[1]),d=Object(i.useContext)(y.a);Object(i.useEffect)(function(){0===r.length&&P.b.fetch('*[_type == "project"]{\n  endDate, startDate\n}').then(function(e){return h(e),function(){}}).catch(function(e){console.error(e)})},[t]);var h=function(e){var t=e.map(function(e,t){var a=function(e,t){var a;return a=12*(t.getFullYear()-e.getFullYear()),a-=e.getMonth()+1,(a+=t.getMonth())<=0?0:a}(new Date(e.startDate),new Date(e.endDate));return e.months=Object(ie.a)(a),e});u(t);var a=t.sort(function(e,t){return e.months-t.months}),n=Object.values(Object(J.groupBy)(a,function(e){return e.months}));o(n.reverse())},p=d.selected.map(function(e){return e.value}),f=Object(M.a)(r,function(e){return e.length}),v=Object(b.a)(f,2),g=(v[0],v[1]),E=(Object(T.a)().range([30,200]).domain([0,g]),Object(T.b)().range([50,60,70,80,90,100]).domain([0,3,6,12,24,36])),j=r.reduce(function(e,t){return e+t.length},0);return s.a.createElement("div",{className:"viz-container"},s.a.createElement(F.a,{minWidth:600},s.a.createElement("div",{className:"w-100 mt-3 overflow-auto",style:{height:"calc(100% - 33px)"}},r.map(function(e,t){var n=e[0].months;return s.a.createElement("div",{className:"px-3 time-block ".concat(p.indexOf(n)>-1?"active":""),key:t,style:{width:"".concat(E(n),"%"),height:"".concat(Math.floor(e.length/j*100),"%"),borderTop:0===t?"1px solid #d7d7d7":"none"},onClick:function(){return function(e,t){d.toggleSelected({type:e,value:t});var n=Object(U.a)(d.selected);a.push("/".concat(d.section).concat(n))}("time",n)}},s.a.createElement("div",null,"".concat(e.length," projects")),s.a.createElement("div",null,"".concat(ie.b[n])))}))))}),me=s.a.lazy(function(){return a.e(3).then(a.bind(null,297))}),ue=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).setSelectedLocation=function(e){a.setState({selectedLocation:e===a.state.selectedLocation?"":e})},a.setSelectedTopic=function(e){a.setState({selectedTopic:e===a.state.selectedTopic?"":e})},a.setSelectedChemical=function(e){a.setState({selectedChemical:e===a.state.selectedChemical?"":e})},a.setSection=function(e){a.setState({section:e})},a.setSelected=function(e){console.log(e),a.setState({selected:e})},a.toggleSelected=function(e){var t=a.state.selected;if(e.type&&null!==e.value){if(Object(J.find)(t,e)){var n=Object(J.findIndex)(t,e);t.splice(n,1)}else t.push(e);a.setState({selected:t})}},a.state={section:"chemical",setSection:a.setSection,selectedChemical:"",setSelectedChemical:a.setSelectedChemical,selectedLocation:"",setSelectedLocation:a.setSelectedLocation,selectedTopic:"",setSelectedTopic:a.setSelectedTopic,selected:[],setSelected:a.setSelected,toggleSelected:a.toggleSelected},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.pathname.split("/");this.setSection(t[1]);var a=E.a.parse(this.props.location.search);if(a.selected&&Array.isArray(a.selected))a.selected.forEach(function(a){var n={type:t[1],value:a};e.toggleSelected(n)});else if(a.selected&&!Array.isArray(a.selected)){var n={type:t[1],value:a.selected};this.toggleSelected(n)}}},{key:"render",value:function(){var e=this.props.location.pathname.split("/")[1];return s.a.createElement(y.a.Provider,{value:this.state},s.a.createElement(s.a.Suspense,{fallback:s.a.createElement(Q.a,null)},s.a.createElement("div",{className:"w-100 h-100 d-flex flex-column"},s.a.createElement(S,null),s.a.createElement("div",{className:"home-container"},s.a.createElement("div",{className:"half-container viz"},"chemical"===e&&s.a.createElement(K,null),"topic"===e&&s.a.createElement(Y,null),"location"===e&&s.a.createElement(oe,null),"researcher"===e&&s.a.createElement(ae,null),"time"===e&&s.a.createElement(se,null),"method"===e&&s.a.createElement(le,null)),s.a.createElement("div",{className:"half-container list"},s.a.createElement(me,null))))))}}]),t}(i.Component);ue.contextType=y.a;var de=ue,he=a(43),pe=a.n(he),fe=a(293),ve=a(288),ge=a(289),Ee=a(290),be=a(291),ye=Object(f.a)(function(e){var t=e.type,a=e.elements,n=e.objectKey,c=e.history,r=Object(i.useContext)(y.a);return s.a.createElement("div",{className:"d-flex flex-wrap"},a?a.map(function(e,o){if(e){var l=n?e[n]:e.name;return s.a.createElement(s.a.Fragment,{key:o},s.a.createElement("div",{className:"mr-1 link list-el"},s.a.createElement("div",{onClick:function(){return function(e,t){r.setSelected({type:e,value:t}),c.push("/".concat(e,"?selected=").concat(t))}(t,l)}},l)),s.a.createElement("span",{className:"mr-1 list-el"},o<a.length-1?"|":""))}}):s.a.createElement("div",{className:"mr-1 list-el"},"Not found"))}),je=function(e){var t=e.project;return s.a.createElement("div",{className:"right-column"},s.a.createElement("div",{className:"d-flex flex-column my-4"},s.a.createElement("div",{className:"list-title"},"LOCATIONS"),s.a.createElement(ye,{type:"location",elements:t.places,objectKey:"city"})),s.a.createElement("div",{className:"d-flex flex-column my-4"},s.a.createElement("div",{className:"list-title"},"CHEMICALS"),s.a.createElement(ye,{type:"chemical",elements:t.chemicals})),s.a.createElement("div",{className:"d-flex flex-column my-4"},s.a.createElement("div",{className:"list-title"},"METHODS"),s.a.createElement(ye,{type:"method",elements:t.methods})),s.a.createElement("div",{className:"d-flex flex-column my-4"},s.a.createElement("div",{className:"list-title"},"TOPICS"),s.a.createElement("div",{className:"d-flex flex-wrap"},s.a.createElement(ye,{type:"topic",elements:t.topics}))))},xe=Object(C.withGetScreen)(function(e){var t=e.url,a=e.isMobile,n=t.split("/")[3];return s.a.createElement("div",{className:"w-100 mt-4",style:{paddingLeft:a()?"0px":"80px"}},s.a.createElement("iframe",{title:"project-video",src:"https://player.vimeo.com/video/".concat(n),width:a()?"100%":"640px",height:a()?"220px":"360px",frameBorder:"0",allowFullScreen:!0}))}),Oe=a(99),we=a(50),Ne=a(101),ke=a.n(Ne),Ce=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).streetView=null,e}return Object(l.a)(t,e),Object(c.a)(t,[{key:"initialize",value:function(e){var t=this;this.props.googleMaps&&(this.streetView=new this.props.googleMaps.StreetViewPanorama(e,this.props.streetViewPanoramaOptions),this.streetView.addListener("position_changed",function(){t.props.onPositionChanged&&t.props.onPositionChanged(t.streetView.getPosition())}),this.streetView.addListener("pov_changed",function(){t.props.onPovChanged&&t.props.onPovChanged(t.streetView.getPov())}))}},{key:"componentDidMount",value:function(){this.initialize(u.a.findDOMNode(this))}},{key:"componentDidUpdate",value:function(){console.log("componentDidUpdate"),this.initialize(u.a.findDOMNode(this))}},{key:"componentWillUnmount",value:function(){this.streetView&&this.props.googleMaps.event.clearInstanceListeners(this.streetView)}},{key:"render",value:function(){return s.a.createElement("div",{style:{height:"100%"}})}}]),t}(s.a.Component);Ce.defaultProps={streetViewPanoramaOptions:{position:{lat:46.9171876,lng:17.8951832},pov:{heading:0,pitch:0},zoom:1}};var Se=ke()(function(e){return{googleMaps:{globalPath:"google.maps",url:"https://maps.googleapis.com/maps/api/js?key="+e.apiKey,jsonp:!0}}})(Ce),Pe=a(102),Ie=a.n(Pe),Te=a(56),Me=Object(T.a)().range([0,30]),Re=function(e){Object(Oe.a)(e);var t=Object(i.useState)([]),a=Object(b.a)(t,2),n=a[0],c=a[1],r=Object(i.useState)(!0),o=Object(b.a)(r,2),l=(o[0],o[1]),m=Object(i.useState)(null),u=Object(b.a)(m,2),d=(u[0],u[1]),h=Object(i.useState)(0),p=Object(b.a)(h,2),f=p[0],v=p[1],g=Object(i.useContext)(y.a);Object(i.useEffect)(function(){P.b.fetch('*[_type == "specialProject1"]{\n  _id, name, coordinates, stringCoordinates, streetviewUrl, streetviewCoordinates, streetviewHead, streetviewPitch, streetviewZoom,\n  "images": images[].asset->url,\n}').then(function(e){return j(e),function(){}}).catch(function(e){console.error(e)})},[g]);var E=Object(we.c)({accessToken:"pk.eyJ1IjoiZ2FicmllbGVjb2xvbWJvIiwiYSI6ImNpdGZqNWY1MjAwZWUyeW1qbDhkZHV2OXMifQ.Nem-UVIW-71T6yQQvjrtog"}),j=function(e){c(e),console.log(e);var t=Object(M.a)(e,function(e){return e.images.length}),a=Object(b.a)(t,2),n=(a[0],a[1]);Me.domain([0,n]),l(!1);var r=e.map(function(e){return[e.coordinates.lng,e.coordinates.lat]}),o=Object(Te.lineString)(r),i=Ie()(o);console.log(i),d(i)},x=function(e,t){return{"circle-radius":Me(e.images.length),"circle-color":t===f?"#000000":"#FFFFFF","circle-stroke-color":"#000000","circle-stroke-width":2,"circle-opacity":1}};n&&n[f]&&console.log(n[f]);var O=null,w=12,N=n&&n[f]?n[f]:null,k={position:{lat:N&&N.streetviewCoordinates?N.streetviewCoordinates.lat:0,lng:N&&N.streetviewCoordinates?N.streetviewCoordinates.lng:0},pov:{heading:N&&N.streetviewHead?N.streetviewHead:0,pitch:N&&N.streetviewPitch?N.streetviewPitch:1},zoom:1,motionTracking:!1,motionTrackingControl:!1,linksControl:!1,panControl:!1,zoomControl:!1,addressControl:!1,fullscreenControl:!1,enableCloseButton:!1,disableDefaultUI:!0,showRoadLabels:!1,clickToGo:!1,scrollwheel:!1};return s.a.createElement("div",{className:"w-100 h-100 d-flex mt-5",style:{height:"600px"}},s.a.createElement("div",{className:"w-40 bg-white overflow-auto d-flex flex-column align-items-center",style:{height:"600px"}},N&&N.streetviewHead&&s.a.createElement("div",{className:"mb-3 w-100"},s.a.createElement("div",{style:{width:"100%",height:"300px",backgroundColor:"#eeeeee"}},s.a.createElement(Se,{apiKey:"AIzaSyDQsgQX8xc6_AiLmbwhZrdpELQJC8rlrII",streetViewPanoramaOptions:k,onPositionChanged:function(){return console.log("onPositionChanged")}}))),s.a.createElement("div",{className:"m-3 text-left w-80 project-page-special-title"},n&&n[f]?n[f].name:""),s.a.createElement("div",{className:"m-3 text-left w-80"},n&&n[f]?n[f].stringCoordinates:""),s.a.createElement("div",{className:"project-page-section-title text-left w-80"},"PICTURES TAKEN"),n&&n[f]&&n[f].images.map(function(e,t){return s.a.createElement("img",{key:t,className:"my-1 w-80",src:"".concat(e)})})),s.a.createElement("div",{className:"w-60"},s.a.createElement(E,{ref:function(e){return O=e},style:"mapbox://styles/gabrielecolombo/cjsnc1pt701yf1fmoasvam9wv",containerStyle:{height:"600px",width:"100%"},onZoomEnd:function(e){var t=O.state.map.getZoom();w=t},zoom:[w],center:[n&&n[f]?n[f].coordinates.lng:-.2416815,n&&n[f]?n[f].coordinates.lat:51.5285582]},n.map(function(e,t){return s.a.createElement(we.b,{type:"circle",paint:x(e,t)},s.a.createElement(we.a,{coordinates:[e.coordinates.lng,e.coordinates.lat],onClick:function(){return v(t)}}))}))))},Le=a(103),_e=a.n(Le),We=Object(C.withGetScreen)(function(e){var t=e.images,a=(e.isTablet,e.isMobile),n=Object(i.useState)(0),c=Object(b.a)(n,2),r=c[0],o=c[1],l={dots:!1,infinite:!0,centerMode:!0,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,variableWidth:!0,arrows:!1,afterChange:function(e){return o(e)}},m=null;console.log(a());var u=a()?300:600;return s.a.createElement("div",{className:"carousel"},s.a.createElement("div",{className:"".concat(a()?"slider-half":"slider")},s.a.createElement(_e.a,Object.assign({ref:function(e){return m=e}},l),t.map(function(e,t){return s.a.createElement("div",{className:"",key:t},s.a.createElement("img",{src:"".concat(e,"?h=").concat(u),key:t,className:"slider-image"}))}))),s.a.createElement("div",{className:"slider-arrows"},s.a.createElement("img",{alt:"previous image",src:"images/arrow-left.svg",width:20,className:"cursor-pointer",onClick:function(){return m.slickPrev()}}),s.a.createElement("div",null,r+1," / ",t.length),s.a.createElement("img",{alt:"next image",src:"images/arrow-right.svg",width:20,className:"cursor-pointer",onClick:function(){return m.slickNext()}})))}),ze={types:{code:function(e){return s.a.createElement("pre",{"data-language":e.node.language},s.a.createElement("code",null,e.node.code))}}},De=Object(f.a)(function(e){var t=e.history,a=e.location,n=Object(i.useState)([]),c=Object(b.a)(n,2),r=c[0],o=c[1],l=Object(i.useState)(!1),m=Object(b.a)(l,2),u=m[0],d=m[1],h=Object(i.useState)(!0),p=Object(b.a)(h,2),f=p[0],v=p[1],g=Object(i.useContext)(y.a),E=a.pathname.split("/")[2];Object(i.useEffect)(function(){var e='*[_type == "project" && slug.current == "'.concat(E,'"]{\n      _id, title, body, slug, videoUrl,\n      "mainImage": mainImage.asset->url,\n      "topics": topics[]->,\n      "chemicals": chemicals[]->,\n      "methods": methodologies[]->,\n      "places": place[]->,\n      "countries": place[]->country[]->,\n      "researchers": researchers[]->,\n      "internalResources": internalResources,\n      "internalResourcesCategories": internalResources[].category->,\n      "internalResourcesFiles": internalResources[].document.asset->,\n      "externalResources": externalResources,\n      "externalResourcesCategories": externalResources[].category->,\n      "images": images[].asset->url,\n    }');P.b.fetch(e).then(function(e){return console.log(e),j(e),function(){}}).catch(function(e){console.error(e)})},[E]);var j=function(e){o(e[0]),v(!1)};return console.log(t),s.a.createElement("div",{className:"w-100 d-flex flex-column position-relative justify-content-center"},s.a.createElement(S,{expanded:!1}),s.a.createElement("div",{className:"w-100 d-flex flex-wrap container"},f&&s.a.createElement(Q.a,{fullheader:!1}),s.a.createElement("div",{className:"close-icon link",onClick:function(){t.length>2?t.goBack():t.push("/chemical")}},s.a.createElement("span",null,s.a.createElement("img",{src:"/images/arrow-left.svg",width:"20px"})),"Back to home"),s.a.createElement("div",{className:"left-column"},s.a.createElement("div",{className:"w-100 py-3"},s.a.createElement("div",{className:"project-page-title"}," ",r.title," "),s.a.createElement("div",{className:"d-flex flex-wrap"},r.researchers&&r.researchers.map(function(e,a){return s.a.createElement(s.a.Fragment,{key:a},s.a.createElement("div",{className:"project-page-researcher link py-1 ".concat(0===a?"mr-2":"mx-2"),onClick:function(){return a="researcher",n=e.name,g.setSelected({type:a,value:n}),void t.push("/".concat(a,"?selected=").concat(n));var a,n}},e.name),s.a.createElement("span",null,a<r.researchers.length-1?"|":""))})),r.mainImage&&s.a.createElement("div",{className:"mt-4"},s.a.createElement("img",{src:"".concat(r.mainImage,"?w=1000&fit=max"),width:"100%"})),s.a.createElement("div",{className:"py-4 project-page-body"},r.body&&r.body[0]&&s.a.createElement(pe.a,{blocks:r.body,serializers:ze}))),s.a.createElement("div",{className:"w-100 mb-5"},(r.internalResources||r.externalResources)&&(r.internalResources.length>0||r.externalResources.length>0)&&s.a.createElement("div",{className:"project-page-section-title-no-padding"},"RESOURCES"),r.internalResources&&s.a.createElement("div",{className:"w-100"},r.internalResources.map(function(e,t){if(r.internalResourcesFiles[t])return s.a.createElement("div",{key:t,className:"project-page-resource"},e.private?s.a.createElement("div",{onClick:function(){return d(!0)},className:"cursor-pointer"},s.a.createElement("span",{className:"resource-category"},"[",r.internalResourcesCategories[t].name,"]"),s.a.createElement(pe.a,{blocks:e.name,serializers:ze,className:"resource-container",renderContainerOnSingleChild:!0})):s.a.createElement("a",{href:r.internalResourcesFiles[t].url,download:!0},s.a.createElement("span",{className:"resource-category"},"[",r.internalResourcesCategories[t].name,"]"),s.a.createElement(pe.a,{blocks:e.name,serializers:ze,className:"resource-container",renderContainerOnSingleChild:!0})))})),r.externalResources&&s.a.createElement("div",{className:"w-100"},r.externalResources.map(function(e,t){if(e.linkUrl)return s.a.createElement("div",{key:t,className:"project-page-resource"},s.a.createElement("span",{className:"resource-category"},"[",r.externalResourcesCategories[t].name,"]"),s.a.createElement("a",{href:e.linkUrl,target:"_blank",download:!0},s.a.createElement(pe.a,{blocks:e.name,serializers:ze,className:"resource-container",renderContainerOnSingleChild:!0})))})))),s.a.createElement(je,{project:r}),r.images&&s.a.createElement("div",{className:"project-page-section-title"},"IMAGES"),r.images&&s.a.createElement(We,{images:r.images}),r.videoUrl&&s.a.createElement(xe,{url:r.videoUrl})),s.a.createElement(fe.a,{isOpen:u,toggle:function(){return d(!u)},className:""},s.a.createElement(ve.a,{toggle:function(){return d(!u)}},"This document is private"),s.a.createElement(ge.a,null,"If you want to read this document, send us a message at"," ",s.a.createElement("a",{href:"mailto:info@info.com"},"info@info.com")),s.a.createElement(Ee.a,null,s.a.createElement(be.a,{color:"secondary",onClick:function(){return d(!u)}},"Close"))),r.slug&&"mapping-chemicals-in-cagayan-de-oro"===r.slug.current&&s.a.createElement(Re,null))});a(274),a(275),a(276),a(277),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ue=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(d.a,null,s.a.createElement("div",{className:"w-100 h-100"},s.a.createElement(h.a,null,s.a.createElement(p.a,{exact:!0,path:"/",component:v}),s.a.createElement(p.a,{exact:!0,path:"/:type(chemical|topic|location|researcher|time|method)?/:selection",component:de}),s.a.createElement(p.a,{exact:!0,path:"/projects/:slug",component:De}))))}}]),t}(s.a.Component);u.a.render(s.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},55:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return c});var n={0:"3 months",3:"6 months",6:"1 year",12:"2 years",24:"3 years",36:"more than 3 years"},c=function(e){return e<3?0:e>=3&&e<6?3:e>=6&&e<12?6:e>=12&&e<24?12:e>=24&&e<36?24:e>=36?36:void 0}},8:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(0),c=a.n(n).a.createContext({section:"",setSection:function(){},selectedChemical:"",setSelectedChemical:function(){},selectedLocation:"",setSelectedLocation:function(){},selectedTopic:"",setSelectedTopic:function(){},selected:[],setSelected:function(){},toggleSelected:function(){}})}},[[104,1,2]]]);
//# sourceMappingURL=main.9cc5d593.chunk.js.map